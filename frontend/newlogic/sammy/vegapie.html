<html>
    <head>
        <meta charset="utf-8">
        <title>Pie Chart</title/>
        <script src="vega/lib/d3.v3.min.js"></script>
        <script src="vega/vega.js"></script>
            <style>
                
            </style>
    </head>
    <body>
        <div id="vis" class="vis"></div>
    </body>
    <script type="text/javascript">
        var spec = 
        {
            "name": "Pie",
            "width": 500,
            "height": 500,
            "data": [
            {
                "name": "crimetable",
                "url": "crimetable.json",
                "transform": [
                {
                    "type": "pie", 
                    "value": "data.crimerate"
                }],
                "format": 
                {
                    "type": "json",
                    "parse": {"crimerate": "number"},
                    "property": "data.results"
                    //will strip json of the wrapper "data"
                }
            }],
            "scales": [
            {
                "name": "r", "type": "sqrt", "range": [0,360],
                "domain": {"data": "crimetable", "field": "data.crimerate"}
            }],
            "marks": [
            {
                "type": "arc",
                "from": {"data": "crimetable"},
                "properties":
                {
                    "enter":
                    {
                        "x": {"group": "width", "mult": 0.1},
                        "y": {"group": "height", "mult": 0.1},
                        "startAngle": {"field": "startAngle"},
                        "endAngle": {"field": "endAngle"},
                        "innerRadius": {"value": 100},
                        "outerRadius": {"scale": "r"},
                        "stroke": {"value": "#fff"},
                    },
                    "update": 
                    {
                        "fill": {"value": "#90513E"}
                    },
                    "hover":
                    {
                        "fill": {"value": "#403E90"}
                    }
                }
            },
            /*{
                "type": "text",
                "from": {"data": "crimetable"},
                "properties":
                {
                    "enter":
                    {
                        "dx": {"scale": "r", "mult": 0.5},
                        "dy": {"scale": "r"},
                        "text": {"field": "data.crimerate"},
                        "fill": {"value": "#000"}
                    }
                }
            }*/]
        }
        vg.parse.spec(spec, function(chart)
        {
            var view = chart({el:"#vis"}).update();
        });
    </script>
</html>
