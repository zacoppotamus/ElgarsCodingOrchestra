
<html>
  <head>
    <title>Vega Scaffold</title>
    <script src="http://trifacta.github.io/vega/lib/d3.v3.min.js"></script>
    <script src="http://trifacta.github.io/vega/lib/d3.geo.projection.min.js"></script>
    <script src="vega.min.js"></script>
  </head>
  <body>
    <div id="vis"></div>
  </body>
<script type="text/javascript">
// parse a spec and create a visualization view
function parse(spec) {
  vg.parse.spec(spec, function(chart) { chart({el:"#vis"}).update(); });
}

function barspec(xName, yName) {
    return ({
      "width": 1000,
      "height": 500,
      "data": [
        {
          "name": "table",
          "url": "vegaproxy.php?dataset=benelgar.zactest1&fields=[%22"+xName+"%22,%22"+yName+"%22]"
        }
      ],
      "scales": [
        {
          "name": "x",
          "type": "ordinal",
          "range": "width",
          "domain": {"data": "table", "field": "data."+xName}
        },
        {
          "name": "y",
          "range": "height",
          "nice": true,
          "domainMax":50000,
          "domain": {"data": "table", "field": "data."+yName}
        }
      ],
      "axes": [
        {"type": "x", "scale": "x"},
        {"type": "y", "scale": "y"}
      ],
      "marks": [
        {
          "type": "rect",
          "from": {"data": "table"},
          "properties": {
            "enter": {
              "x": {"scale": "x", "field": "data."+xName},
              "width": {"scale": "x", "band": true, "offset": -1},
              "y": {"scale": "y", "field": "data."+yName},
              "y2": {"scale": "y", "value": 0}
            },
            "update": {
              "fill": {"value": "steelblue"}
            },
            "hover": {
              "fill": {"value": "red"}
            }
          }
        }
      ]
    });
}

parse(barspec("Type", "y2000"));
</script>
</html>
